{
 "1": "  @clear_session({'spanId': 1})\n  def test_1_get_(self):\n    # endpoint 1\n    trdemo_client = get_http_target('TARGET_TRDEMO_CLIENT', authenticate)\n    resp = trdemo_client.get('/')\n    resp.assert_status_code(200)\n    resp.assert_cssselect('div.container-fluid div h1', expected_value='Welcome!')\n    resp.assert_cssselect('html head title', expected_value=' TestR Demo app ')\n\n",
 "3": "  @json_dataset('data/test_3_get_cart_add.json')\n  @clear_session({'spanId': 3})\n  def test_3_get_cart_add(self, data_row):\n    product_id, source, startDate, = data_row\n\n    # endpoint 9\n    qstr = '?' + urlencode([('destination', '*'), ('endDate', ''), ('source', source), ('startDate', startDate)])\n    trdemo_client = get_http_target('TARGET_TRDEMO_CLIENT', authenticate)\n    resp = trdemo_client.get('/search' + qstr)\n    resp.assert_status_code(200)\n    resp.assert_cssselect('div#flightsearch-form form.form-search h1.h3.font-weight-normal', expected_value=' Search Flights')\n    resp.assert_cssselect('html head title', expected_value=' TestR Demo app ')\n    X_Original_Uri = cssselect('div.container-fluid div table.table.table-striped tbody tr td a[href] @href', resp)\n\n    # endpoint 3\n    qstr = '?' + urlencode([('product_id', product_id)])\n    resp = trdemo_client.get('/cart/add' + qstr, headers=dict([('X-Original-Uri', X_Original_Uri)]))\n    resp.assert_status_code(302)\n    resp.assert_cssselect('h1', expected_value='Redirecting...')\n    resp.assert_cssselect('html head title', expected_value='Redirecting...')\n\n",
 "4": "  @json_dataset('data/test_4_get_flight.json')\n  @clear_session({'spanId': 4})\n  def test_4_get_flight(self, data_row):\n    source, startDate, = data_row\n\n    # endpoint 2\n    trdemo_client = get_http_target('TARGET_TRDEMO_CLIENT', authenticate)\n    resp = trdemo_client.get('/cart')\n    resp.assert_status_code(200)\n    resp.assert_cssselect('html head title', expected_value=' TestR Demo app ')\n    X_Original_Uri = cssselect('div.container-fluid div table.table.table-striped.table-responsive-md.btn-table tbody tr td a[href] @href', resp)\n\n    # endpoint 9\n    qstr = '?' + urlencode([('destination', '*'), ('endDate', ''), ('source', source), ('startDate', startDate)])\n    resp = trdemo_client.get('/search' + qstr)\n    resp.assert_status_code(200)\n    resp.assert_cssselect('div#flightsearch-form form.form-search h1.h3.font-weight-normal', expected_value=' Search Flights')\n    resp.assert_cssselect('html head title', expected_value=' TestR Demo app ')\n    flight_id = url_part('?product_id', cssselect('div.container-fluid div table.table.table-striped tbody tr td a[href] @href', resp))\n\n    # endpoint 4\n    qstr = '?' + urlencode([('flight_id', flight_id)])\n    resp = trdemo_client.get('/flight' + qstr, headers=dict([('X-Original-Uri', X_Original_Uri)]))\n    resp.assert_status_code(200)\n    resp.assert_cssselect('html head title', expected_value=' TestR Demo app ')\n\n",
 "6": "  # authentication-related test\n  @clear_session({'spanId': 6})\n  def test_6_post_login(self):\n    # endpoint 5\n    trdemo_client = get_http_target('TARGET_TRDEMO_CLIENT', dummy_auth)\n    resp = trdemo_client.get('/login')\n    resp.assert_status_code(200)\n    resp.assert_cssselect('div#logreg-forms h1.h3.font-weight-normal', expected_value=' Select user (temp) ')\n    resp.assert_cssselect('html head title', expected_value=' TestR Demo app ')\n    user = cssselect('form#userform select.custom-select[name=\"user\"] option[value] @value', resp)\n\n    # endpoint 6\n    resp = trdemo_client.post('/login', data=[('user', user)])\n    resp.assert_status_code(302)\n    resp.assert_cssselect('h1', expected_value='Redirecting...')\n    resp.assert_cssselect('html head title', expected_value='Redirecting...')\n\n",
 "7": "  @clear_session({'spanId': 7})\n  def test_7_get_logout(self):\n    # endpoint 7\n    trdemo_client = get_http_target('TARGET_TRDEMO_CLIENT', authenticate)\n    resp = trdemo_client.get('/logout')\n    resp.assert_status_code(302)\n    resp.assert_cssselect('h1', expected_value='Redirecting...')\n    resp.assert_cssselect('html head title', expected_value='Redirecting...')\n\n",
 "8": "  @clear_session({'spanId': 8})\n  def test_8_get_logout(self):\n    # endpoint 8\n    trdemo_client = get_http_target('TARGET_TRDEMO_CLIENT', authenticate)\n    resp = trdemo_client.get('/logout')\n    resp.assert_status_code(200)\n    resp.assert_cssselect('div.container-fluid div h1', expected_value='Welcome!')\n    resp.assert_cssselect('html head title', expected_value=' TestR Demo app ')\n\n",
 "15": "  @json_dataset('data/test_15_put_cart_email.json')\n  @clear_session({'spanId': 15})\n  def test_15_put_cart_email(self, data_row):\n    param, = data_row\n\n    # endpoint 11\n    trdemo_users = get_http_target('TARGET_TRDEMO_USERS', authenticate)\n    resp = trdemo_users.get('/user/all')\n    resp.assert_status_code(200)\n    _email = jsonpath('$.[*].email', resp)\n\n    # endpoint 12\n    trdemo_shoppingcart = get_http_target('TARGET_TRDEMO_SHOPPINGCART', authenticate)\n    resp = trdemo_shoppingcart.get(f'/cart/{_email}')\n    resp.assert_status_code(200)\n    product_id = jsonpath('$.products.[*].product_id', resp)\n\n    # endpoint 13\n    trdemo_flights = get_http_target('TARGET_TRDEMO_FLIGHTS', authenticate)\n    resp = trdemo_flights.get(f'/flight/{product_id}/{param}')\n    resp.assert_status_code(200)\n    product_id1 = jsonpath('$.[*].flight_id', resp)\n\n    # endpoint 15\n    with open('data/payload_for_trdemo_shoppingcart_endp15.json', 'r') as json_payload_file:\n        json_payload = json.load(json_payload_file)\n    apply_into_json(json_payload, \"$.product_id\", product_id1)\n    resp = trdemo_shoppingcart.put(f'/cart/{_email}', json=json_payload)\n    resp.assert_status_code(201)\n\n",
 "17": "  @clear_session({'spanId': 17})\n  def test_17_delete_cart_email_product_id(self):\n    # endpoint 11\n    trdemo_users = get_http_target('TARGET_TRDEMO_USERS', authenticate)\n    resp = trdemo_users.get('/user/all')\n    resp.assert_status_code(200)\n    _email = jsonpath('$.[*].email', resp)\n\n    # endpoint 12\n    trdemo_shoppingcart = get_http_target('TARGET_TRDEMO_SHOPPINGCART', authenticate)\n    resp = trdemo_shoppingcart.get(f'/cart/{_email}')\n    resp.assert_status_code(200)\n    product_id = jsonpath('$.products.[*].product_id', resp)\n\n    # endpoint 17\n    resp = trdemo_shoppingcart.delete(f'/cart/{_email}/{product_id}')\n    resp.assert_status_code(200)\n\n",
 "14": "  @clear_session({'spanId': 14})\n  def test_14_get_flight_product_id(self):\n    # endpoint 11\n    trdemo_users = get_http_target('TARGET_TRDEMO_USERS', authenticate)\n    resp = trdemo_users.get('/user/all')\n    resp.assert_status_code(200)\n    _email = jsonpath('$.[*].email', resp)\n\n    # endpoint 12\n    trdemo_shoppingcart = get_http_target('TARGET_TRDEMO_SHOPPINGCART', authenticate)\n    resp = trdemo_shoppingcart.get(f'/cart/{_email}')\n    resp.assert_status_code(200)\n    product_id = jsonpath('$.products.[*].product_id', resp)\n\n    # endpoint 14\n    trdemo_flights = get_http_target('TARGET_TRDEMO_FLIGHTS', authenticate)\n    resp = trdemo_flights.get(f'/flight/{product_id}')\n    resp.assert_status_code(200)\n    resp.assert_jsonpath('$.destination', expected_value='JFK')\n\n",
 "10": "  @clear_session({'spanId': 10})\n  def test_10_get_user_email(self):\n    # endpoint 11\n    trdemo_users = get_http_target('TARGET_TRDEMO_USERS', authenticate)\n    resp = trdemo_users.get('/user/all')\n    resp.assert_status_code(200)\n    _email = jsonpath('$.[*].email', resp)\n\n    # endpoint 10\n    resp = trdemo_users.get(f'/user/{_email}')\n    resp.assert_status_code(200)\n    resp.assert_jsonpath('$.airport', expected_value='TLV')\n\n"
}